import{j as t}from"./jsx-runtime.TBa3i5EZ.js";import{r as h}from"./index.CVf8TyFT.js";const g=()=>{const[a,r]=h.useState({firstName:"",lastName:"",email:"",street:"",city:"",postalCode:""}),{firstName:c,lastName:d,email:s,street:i,city:m,postalCode:p}=a,l=typeof window<"u"&&localStorage.getItem("cart")?JSON.parse(localStorage.getItem("cart")||"{}"):[],n=l?.reduce((e,o)=>o.price+e,0),u={basketModel:l,customer:{firstName:c,lastName:d,identifier:s,addresses:[{type:"billing",email:s},{type:"delivery",street:i,city:m,postalCode:p}]},total:{currency:"USD",gross:n,net:n,tax:{name:"No Ttax",percent:0}},payment:{provider:"custom",custom:{properties:{property:"payment_method",value:"Crystal Coin"}}}},x=async()=>{let e=await fetch("/order/create",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(u)}).then(o=>o.json());e?.orders?.create?.id&&(localStorage.removeItem("cart"),window.location.href=`/order/${e.orders.create.id}`)};return t.jsxs("div",{className:"p-10 mx-auto bg-background1 w-128 mt-20",children:[t.jsx("h1",{className:"text-text text-3xl font-bold mb-10 text-center",children:"Checkout"}),t.jsxs("div",{className:"mx-auto",children:[t.jsxs("form",{method:"post",className:"flex flex-wrap gap-5",children:[t.jsx("input",{type:"text",name:"First Name",placeholder:"First name",className:"w-full p-3 border border-text",required:!0,onChange:e=>r({...a,firstName:e.target.value})}),t.jsx("input",{type:"text",name:"Last Name",required:!0,placeholder:"Last name",className:"w-full  p-3 border border-text",onChange:e=>r({...a,lastName:e.target.value})}),t.jsx("input",{type:"text",name:"Email",required:!0,placeholder:"Email",className:"w-full  p-3 border border-text",onChange:e=>r({...a,email:e.target.value})}),t.jsx("input",{type:"text",name:"Street",placeholder:"Street",className:"w-full  p-3 border border-text",onChange:e=>r({...a,street:e.target.value})}),t.jsx("input",{type:"text",name:"City",placeholder:"City",className:"w-full  p-3 border border-text",onChange:e=>r({...a,city:e.target.value})}),t.jsx("input",{type:"text",name:"Postal Code",placeholder:"Postal Code",className:"w-full p-3 border border-text",onChange:e=>r({...a,postalCode:e.target.value})})]}),t.jsx("button",{className:"w-full bg-text text-primary p-3 mt-10 rounded font-semibold text-center",onClick:x,children:"Pay Now"})]})]})};export{g as CheckoutForm};
